# 中国移动智能寻源比价助手 - 产品需求文档 (PRD)

> **版本**: v1.0  
> **更新日期**: 2024年12月  
> **产品负责人**: 中国移动采购管理部  
> **文档状态**: 已发布

---

## 一、产品概述

### 1.1 产品定位

**中国移动智能寻源比价助手**是一款面向企业采购人员的 AI 驱动智能辅助工具，旨在通过人工智能技术提升采购寻源效率，降低比价分析的人工成本，为采购决策提供数据支撑。

### 1.2 目标用户

| 用户角色 | 使用场景 | 核心诉求 |
|---------|---------|---------|
| 采购专员 | 日常采购比价、供应商筛选 | 快速获取市场价格信息，提高工作效率 |
| 采购经理 | 采购决策审批、供应商评估 | 全面的数据分析报告，辅助决策判断 |
| 寻源专家 | 复杂项目寻源、战略采购 | 深度市场洞察，供应商风险评估 |

### 1.3 产品价值

1. **效率提升**：将传统 2-3 天的寻源比价工作缩短至分钟级
2. **数据整合**：打通内外部数据源，实现一站式信息查询
3. **智能分析**：AI 自动生成专业比价报告，减少人工分析工作量
4. **决策支持**：基于多维度数据提供采购建议，降低采购风险

---

## 二、功能架构

```
┌─────────────────────────────────────────────────────────────────┐
│                    中国移动智能寻源比价助手                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │   AI 对话    │  │  文件解析    │  │ 寻源比价报告  │          │
│  │   引擎       │  │   引擎       │  │   生成器     │          │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘          │
│         │                 │                 │                   │
│  ┌──────┴─────────────────┴─────────────────┴───────┐          │
│  │                   核心服务层                       │          │
│  ├──────────────────────────────────────────────────┤          │
│  │  • 多模型调度  • 流式响应  • 上下文管理  • 状态持久化 │          │
│  └──────────────────────────────────────────────────┘          │
│                              │                                  │
│  ┌───────────────────────────┴───────────────────────┐         │
│  │                    数据源层                         │         │
│  ├─────────────────────┬─────────────────────────────┤         │
│  │     外部数据源       │        内部数据源            │         │
│  │  • 芯查查           │  • 采购项目查询              │         │
│  │  • 半导小芯         │  • 潜在供应商推荐            │         │
│  │  • 1688            │  • 二采产品价格库            │         │
│  └─────────────────────┴─────────────────────────────┘         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 三、功能模块详述

### 3.1 AI 智能对话

#### 3.1.1 功能描述

提供类 ChatGPT 的自然语言交互体验，用户可通过对话方式获取采购相关信息、进行方案分析、获得决策建议。

#### 3.1.2 支持模型

| 模型名称 | 提供商 | 特点 | 适用场景 |
|---------|-------|------|---------|
| Qwen2.5-VL-72B | 阿里云 | 视觉语言模型，响应快速 | 快速问答、日常咨询 |
| DeepSeek-R1 | DeepSeek | 深度思考推理，支持思维链展示 | 复杂分析、深度推理 |
| DeepSeek-V3 | DeepSeek | 通用对话，性能均衡 | 通用场景（默认） |
| Qwen2.5-72B | 阿里云 | 大语言模型，性能强劲 | 长文本处理、报告生成 |

#### 3.1.3 核心能力

- **流式输出**：实时展示 AI 生成过程，提升用户体验
- **思维链展示**：DeepSeek-R1 模型支持展示思考过程，增强可解释性
- **上下文记忆**：支持多轮对话，AI 可基于历史对话内容进行回答
- **消息操作**：支持复制、重新生成、点赞/点踩反馈

#### 3.1.4 交互规范

- 支持 Enter 发送，Shift+Enter 换行
- 支持拖拽上传文件
- 生成过程中可随时停止
- 支持 Markdown 格式渲染（表格、代码块、列表等）

---

### 3.2 文件解析引擎

#### 3.2.1 功能描述

支持用户上传采购方案、项目立项书等文档，系统自动解析提取关键信息，作为 AI 分析的数据输入。

#### 3.2.2 支持格式

| 文件类型 | 扩展名 | 解析能力 |
|---------|-------|---------|
| Excel 表格 | .xlsx, .xls, .csv | 完整表格数据提取，转换为 Markdown 表格 |
| PDF 文档 | .pdf | 文本内容提取（最多50页） |
| Word 文档 | .docx, .doc | 全文本内容提取 |
| PPT 演示文稿 | .pptx, .ppt | 幻灯片文本提取 |
| 纯文本 | .txt | 原文读取 |

#### 3.2.3 技术实现

- **Excel 解析**：使用 SheetJS (xlsx) 库
- **PDF 解析**：使用 PDF.js 库
- **Word 解析**：使用 Mammoth.js 库
- **PPTX 解析**：使用 JSZip 解压 + XML 文本提取

#### 3.2.4 限制说明

- 单文件内容限制 15,000 字符，超出部分截断
- PDF 最多解析前 50 页
- 扫描件 PDF 无法提取文本
- 旧版 .doc/.ppt 格式解析效果有限，建议转换为新格式

---

### 3.3 寻源比价报告生成

#### 3.3.1 功能描述

基于用户选择的标的物和数据源，自动搜索汇总信息，并由 AI 生成专业的《供应商寻源与比价报告》。

#### 3.3.2 使用流程

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  点击       │    │  选择       │    │  选择       │    │  生成       │
│ "寻源比价"  │ -> │  标的物     │ -> │  数据源     │ -> │  报告       │
│  按钮       │    │  (AI提取)   │    │  和维度     │    │            │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

#### 3.3.3 标的物管理

- **智能提取**：AI 自动从对话历史中识别产品型号/标的物
- **手动调整**：支持全选/取消全选，按需勾选
- **数量关联**：自动识别并关联采购数量信息

#### 3.3.4 数据源配置

**外部数据源**（互联网公开信息）

| 数据源 | 数据类型 | 数据价值 |
|-------|---------|---------|
| 芯查查 | 芯片供应商信息 | 芯片类产品市场价格、库存、供应商 |
| 半导小芯 | 半导体行业数据 | 元器件价格、行业动态 |
| 1688 | 阿里巴巴批发平台 | 批发价格、供应商信息 |

**内部数据源**（企业内部系统）

| 数据源 | 数据类型 | 数据价值 |
|-------|---------|---------|
| 采购项目查询 | 历史采购项目记录 | 历史成交价格、供应商表现 |
| 潜在供应商推荐 | 供应商库数据 | 资质审核、合作历史、联系方式 |
| 二采产品价格库 | 二次采购价格数据 | 历史价格趋势、成本参考 |

#### 3.3.5 供应商评估维度

当选择"潜在供应商推荐"数据源时，需选择评估维度：

| 评估维度 | 评估内容 | 默认状态 |
|---------|---------|---------|
| 历史表现 | 供应商过往合作的交付质量、按时交货率等 | ✅ 默认选中 |
| 市场份额 | 供应商在相关市场的占有率和行业地位 | ✅ 默认选中 |
| 总体实力 | 企业规模、财务状况、资质认证等综合实力 | ✅ 默认选中 |
| 关键能力 | 技术研发、生产制造、服务响应等核心能力 | ✅ 默认选中 |

#### 3.3.6 报告输出格式

生成的报告包含以下章节：

1. **标的物概述**
   - 产品名称、规格型号、关键参数

2. **内部数据分析**（如选择内部数据源）
   - 历史采购情况
   - 供应商资源
   - 历史价格区间

3. **外部市场调研**（如选择外部数据源）
   - 市场供需格局
   - 价格趋势
   - 技术迭代情况

4. **潜在供应商推荐**
   - 供应商信息表（名称、性质、数据来源、优势、风险）

5. **价格比对与分析**
   - 价格对比表
   - 综合建议（采购策略、目标价、供应商推荐）

#### 3.3.7 数据源引用

- 报告生成后展示"参考数据源"折叠区域
- 点击可查看各数据来源的详细信息
- 支持跳转至原始数据链接

---

### 3.4 对话管理

#### 3.4.1 功能描述

提供完整的对话历史管理功能，支持多会话切换、历史记录查看。

#### 3.4.2 功能列表

| 功能 | 描述 |
|-----|------|
| 新建对话 | 创建新的对话会话 |
| 对话切换 | 在历史对话间快速切换 |
| 重命名对话 | 修改对话标题（支持回车确认、ESC取消） |
| 删除对话 | 删除不需要的对话记录 |
| 日期分组 | 按"今天"、"昨天"、"七天以内"、"年月"分组显示 |
| 本地持久化 | 对话数据自动保存至本地存储 |

---

### 3.5 系统设置

#### 3.5.1 主题切换

- 支持 **深色模式** 和 **浅色模式** 切换
- 默认跟随系统主题偏好
- 用户选择后自动记忆

#### 3.5.2 模型设置

- 可视化模型选择界面
- 展示模型名称、提供商、特点描述
- 特殊标识：快速模型、深度思考模型

#### 3.5.3 侧边栏

- 支持折叠/展开
- 折叠后显示悬浮展开按钮
- 响应式适配移动端

---

## 四、技术架构

### 4.1 技术栈

| 层级 | 技术选型 |
|-----|---------|
| 前端框架 | React 18 + TypeScript |
| 构建工具 | Vite |
| 状态管理 | Zustand (含持久化) |
| UI 组件 | Lucide React Icons |
| Markdown | react-markdown + remark-gfm + rehype-raw |
| 文件解析 | xlsx, pdf.js, mammoth, jszip |
| AI 服务 | 硅基流动 API (SiliconFlow) |
| 搜索服务 | 博查搜索 API |

### 4.2 项目结构

```
src/
├── components/          # UI 组件
│   ├── ChatArea/       # 聊天区域
│   ├── ChatInput/      # 输入框组件
│   ├── MessageBubble/  # 消息气泡
│   ├── Sidebar/        # 侧边栏
│   ├── ToolSelector/   # 工具选择器（寻源比价）
│   ├── ModelSettings/  # 模型设置弹窗
│   ├── WelcomeScreen/  # 欢迎页
│   └── ChinaMobileLogo/ # Logo 组件
├── config/             # 配置文件
├── store/              # Zustand 状态管理
├── styles/             # 全局样式
├── types/              # TypeScript 类型定义
└── utils/              # 工具函数
    ├── api.ts          # AI API 调用
    ├── fileParser.ts   # 文件解析
    └── webSearch.ts    # 网络搜索
```

### 4.3 数据流

```
用户输入 -> 状态管理 (Zustand) -> API 调用 -> 流式响应 -> UI 更新
                  ↓
            本地存储持久化
```

---

## 五、界面设计规范

### 5.1 品牌色彩

| 色彩 | 用途 | 色值 |
|-----|------|-----|
| 主色 | 按钮、链接、强调 | #007AFF (iOS Blue) |
| 辅助色 | 次要操作、标签 | #4CAF50 (Green) |
| 背景色（深色） | 深色模式背景 | #1a1a2e |
| 背景色（浅色） | 浅色模式背景 | #f5f5f7 |

### 5.2 交互规范

- 按钮点击有视觉反馈
- 长时间操作显示加载状态
- 错误信息明确提示
- 关键操作需二次确认

### 5.3 响应式设计

- 桌面端：侧边栏 + 主内容区布局
- 移动端：侧边栏可折叠，全屏对话

---

## 六、安全与合规

### 6.1 数据安全

- API Key 通过环境变量配置，不硬编码
- 敏感数据（如底价）需谨慎处理
- 本地存储数据支持清除

### 6.2 合规要求

- 遵守《数据安全法》相关规定
- 内部数据不外泄
- 用户反馈数据脱敏处理

---

## 七、部署与运维

### 7.1 环境配置

```bash
# 环境变量配置 (.env)
VITE_SILICONFLOW_API_KEY=your_api_key_here
```

### 7.2 构建部署

```bash
# 安装依赖
npm install

# 开发环境
npm run dev

# 生产构建
npm run build

# 预览构建结果
npm run preview
```

### 7.3 性能指标

| 指标 | 目标值 |
|-----|-------|
| 首屏加载时间 | < 3s |
| AI 首字响应时间 | < 2s |
| 文件解析时间（10MB）| < 5s |

---

## 八、版本规划

### 8.1 当前版本 (v1.0)

✅ AI 智能对话（多模型支持）  
✅ 文件解析（Excel/PDF/Word/PPT）  
✅ 寻源比价报告生成  
✅ 内外部数据源集成  
✅ 供应商评估维度选择  
✅ 对话历史管理  
✅ 主题切换  

### 8.2 后续规划 (v2.0)

- [ ] 用户登录与权限管理
- [ ] 报告导出（PDF/Word）
- [ ] 供应商数据实时对接
- [ ] 价格预警与监控
- [ ] 多人协作功能
- [ ] 移动端 App

---

## 九、附录

### 9.1 术语表

| 术语 | 定义 |
|-----|------|
| 标的物 | 采购项目中的具体产品/物料 |
| 寻源 | 寻找合适供应商的过程 |
| 比价 | 对多个供应商报价进行对比分析 |
| 二采 | 二次采购，指框架协议内的后续采购 |

### 9.2 相关文档

- 《中国移动采购管理规范》
- 《供应商评估标准》
- 《硅基流动 API 文档》

---

**文档结束**

> 如有疑问，请联系产品团队。

